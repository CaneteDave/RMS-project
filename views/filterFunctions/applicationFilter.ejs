<style>
  .active{
    background-color: grey; 
    color: white;
  }
</style>
<script>
  $(document).ready(function(){
    // search bar function
    var $block = $('.no-results');
    $("#myInput").keyup(function() {
      var val = $(this).val();
      var isMatch = false;

      $("#myCard .card").each(function(i) {
          var content = $(this).html();
          if(content.toLowerCase().indexOf(val) == -1) {
            $(this).hide();         
          } else {
              isMatch = true;
              $(this).show();
          }
      });
      $block.toggle(!isMatch);
    });

    // skills changing style onclick
    $(':button').click(function(){
      if($(this).hasClass('active')){
        $(this).removeClass('active')
      } else {
        $(this).addClass('active')
      }
    })

    let $filterCheckboxes = $('input:checkbox');
    let $filterButtons = $(':button');

    // checkbox filter function
    function checkboxFilter() {
  
      let selectedFilters = {};
  
      $filterCheckboxes.filter(':checked').each(function() {
  
        if (!selectedFilters.hasOwnProperty(this.name)) {
          selectedFilters[this.name] = [];
        }
  
        selectedFilters[this.name].push(this.value);
  
      });

      $filterButtons.filter('.active').each(function() {
  
        if (!selectedFilters.hasOwnProperty(this.name)) {
          selectedFilters[this.name] = [];
        }

        selectedFilters[this.name].push(this.value);

      });
      // create a collection containing all of the filterable elements
      let $filteredResults = $('.applicants');
  
      // loop over the selected filter name -> (array) values pairs
      $.each(selectedFilters, function(name, filterValues) {
  
        // filter each .flower element
        $filteredResults = $filteredResults.filter(function() {
  
          let matched = false,
            currentFilterValues = $(this).data('category').split(" ").map(item => item.trim());
  
          // loop over each category value in the current .flower's data-category
          $.each(currentFilterValues, function(_, currentFilterValue) {
  
            // if the current category exists in the selected filters array
            // set matched to true, and stop looping. as we're ORing in each
            // set of filters, we only need to match once
  
            if ($.inArray(currentFilterValue, filterValues) != -1) {
              matched = true;
              return false;
            }
          });
  
          // if matched is true the current .flower element is returned
          return matched;
  
        });
      });
  
      $('.applicants').hide().filter($filteredResults).show();
    }
  
    $filterCheckboxes.on('change', checkboxFilter);
    $filterButtons.on('click', checkboxFilter);

    // AJAX post on changing status
    $(".statusForm").change(function() {
        // Get some values from elements on the page:
        const $form = $(this),
          remark = $form.find(`select`).val(),
          url = $form.attr( "action" );
  
        // Send the data using post
        $.post( url, { remark: remark });

    });
  });
</script>

